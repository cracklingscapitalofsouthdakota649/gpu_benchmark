[pytest]
# -------------------------------------------------------------------
# Pytest Configuration for GPU/CPU Benchmark & Allure Reporting
# -------------------------------------------------------------------
pythonpath = .
minversion = 8.0
timeout = 30

# Directories where tests are located
testpaths = tests

# Recognize test file names
python_files = test_*.py
python_classes = Test*
python_functions = test_*


# Add markers for logical grouping
markers =
    gpu: GPU-related tests (generic CUDA/ROCm)
    cpu: CPU-bound tests
    nvidia: NVIDIA-specific tests (e.g., Tensor Core benchmarks)
    amd: AMD-specific tests (e.g., Matrix Core benchmarks)
    intel: Intel-specific tests
    benchmark: Performance benchmarking
    stress: Heavy-load or endurance tests
    preprocess: Data preprocessing
    accelerator: GPU accelerator
    io_accelerator: I/O accelerator performance tests
    network_io_accelerator: Network I/O accelerator performance tests

# Enable detailed benchmark comparison and Allure JSON output
addopts =
    -p .
    --tb=short
    --benchmark-json=allure-results/benchmark.json
    --alluredir=allure-results
    --benchmark-save=latest
    --benchmark-autosave
    --benchmark-min-rounds=5
    --disable-warnings
    -v
    -ra -q

# Ignore specific warnings (optional)
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning

# Custom environment variables (optional)
env =
    PYTHONUNBUFFERED=1
    PYTEST_DISABLE_PLUGIN_AUTOLOAD=1

# -------------------------------------------------------------------
# Notes:
# - allure-results folder automatically collects test reports.
# - Allure dashboard will display GPU/CPU trend metrics when combined
#   with update_trend.py and custom-trend/index.js plugin.
# -------------------------------------------------------------------
